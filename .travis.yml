language: java
jdk:
- oraclejdk7
- oraclejdk8
after_success:
- mvn -e -X clean test jacoco:report coveralls:jacoco
env:
  global:
  - VERBOSE=1
  # ALGOLIA_APPLICATION_ID
  - secure: "SkDFRfL7ytlf2WIGnCsEfQFR4E0ok6Tg8CNTyEnxp7Rep/DG8z0RMsPbfZ5ith6SmLqn16R5454tg/SQEocRMoTkpPx14YFilsMBUvxfJn/9lkkJPCjot0gHGJMGky3BMfJzSkettariSeINFPDuY6hBJq9FyjEvEzltI20fCjE="
  # ALGOLIA_API_KEY
  - secure: "Rzc5cEHu7i5JQZA5Dcu4JmEiGIKfrHmn/LtGxwc/e3SaIw6d8mQCmFuFAKdd5ap1neQvH9BPG7yQEHvR0ITcoAlu2WebJyajGwg/zJUDOLw3cDfFsxGqsJcb84nuWw0BgM/JHf6upQg2NC/Sg9Bze921BjVCIgQNOCtzz32TTDY="

# force non-container build
sudo: required
# workaround for https://github.com/travis-ci/travis-ci/issues/5227
before_install:
  - cat /etc/hosts # optionally check the content *before*
  - sudo hostname "$(hostname | cut -c1-63)"
  - sed -e "s/^\\(127\\.0\\.0\\.1.*\\)/\\1 $(hostname | cut -c1-63)/" /etc/hosts | sudo tee /etc/hosts
  - cat /etc/hosts # optionally check the content *after*
